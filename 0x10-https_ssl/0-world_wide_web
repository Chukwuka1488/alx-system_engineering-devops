#!/usr/bin/env bash
# This script displays DNS A record information for given domain and subdomains.

# Function to query and print subdomain DNS A record information
query_dns() {
    local domain="$1"
    local subdomain="$2"
    local record_info

    # Perform DNS lookup and extract A record information
    record_info=$(dig +noall +answer "${subdomain}.${domain}" | awk '/^.*\sA\s/ { print $5 }')

    # Check if the record information is available
    if [[ -n "$record_info" ]]; then
        echo "The subdomain ${subdomain} is an A record and points to ${record_info}"
    else
        echo "No A record found for ${subdomain}.${domain}"
    fi
}

# Main logic of the script
if [[ -n "$2" ]]; then
    # If a specific subdomain is provided, query that subdomain
    query_dns "$1" "$2"
else
    # If no specific subdomain is provided, query the default subdomains
    query_dns "$1" "www"
    query_dns "$1" "lb-01"
    query_dns "$1" "web-01"
    query_dns "$1" "web-02"
fi